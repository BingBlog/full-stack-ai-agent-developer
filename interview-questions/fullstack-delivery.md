# 全栈交付与产品体验

## 架构与渲染策略

1. [频率:高][难度:易] 在 Next.js App Router 中如何划分 Server Component 与 Client Component？ 提示：关注数据依赖、交互频率与 hydration 成本。
2. [频率:高][难度:易] 描述 React Server Components 的数据流与 Suspense 协作机制。 提示：强调 streaming、async 边界、fallback。
3. [频率:高][难度:中] 页面需要同时调用多个 AI 服务时，你会如何组织并发与错误处理？ 提示：使用 Promise.allSettled、并行数据获取、中断策略。
4. [频率:高][难度:中] 解释 Incremental Static Regeneration（ISR）在 AI 内容场景中的价值。 提示：考虑缓存更新、个性化限制。
5. [频率:中][难度:中] Server Actions 如何帮助减少客户端 API 代码？在安全上需要注意什么？ 提示：函数运行位置、输入验证、CSRF。
6. [频率:中][难度:难] 当需要嵌入第三方聊天组件时，如何保证与现有布局和状态兼容？ 提示：微前端、事件总线、容器样式隔离。
7. [频率:中][难度:难] 描述一种在单页应用中实现逐步启用 AI 功能的架构策略。 提示：feature flag、延迟加载、渐进增强。

## API 整合与安全

1. [频率:高][难度:易] 浏览器调用后端 AI Proxy 时，你如何设计鉴权与速率限制？ 提示：JWT、签名校验、漏桶算法。
2. [频率:高][难度:易] 构建 BFF（Backend For Frontend）以聚合 AI 服务的优势是什么？ 提示：隐藏复杂性、统一日志、缓存。
3. [频率:高][难度:中] 说明如何将外部 LLM 提供商的 SDK 安全嵌入后端，并记录调用成本。 提示：密钥管理、幂等、成本指标。
4. [频率:高][难度:中] 当需要调用用户私有数据时，如何实现授权与访问审计？ 提示：OAuth、细粒度权限、审计表。
5. [频率:中][难度:中] 处理大文件上传供 AI 分析时，如何设计断点续传与存储？ 提示：分块上传、预签名 URL、异步处理。
6. [频率:中][难度:难] 前后端如何协作处理敏感字段脱敏并仍满足模型需求？ 提示：masking、hash 映射、上下文补全。
7. [频率:中][难度:难] 描述一次你将传统 REST API 升级为支持流式响应的实践。 提示：HTTP chunk、SSE、backpressure。

## 数据与状态管理

1. [频率:高][难度:易] 如何使用 Prisma + PostgreSQL 设计会话、消息、检索日志的 schema？ 提示：关系建模、索引、软删除。
2. [频率:中][难度:易] 在多租户 SaaS 中，如何确保数据隔离与查询性能？ 提示：schema per tenant、row level security、分片。
3. [频率:中][难度:中] 描述在前端管理对话状态的策略，如何与服务器保持一致？ 提示：乐观更新、状态同步、持久化。
4. [频率:中][难度:中] 当需要缓存模型中间结果时，你会选择哪种缓存策略？ 提示：边缘缓存、Redis、浏览器 IndexedDB。
5. [频率:低][难度:中] 如何在 Prisma 中实现审计日志与数据回滚功能？ 提示：中间件、历史表、事务。
6. [频率:低][难度:难] 解释 GraphQL + Prisma 在 AI 应用中的优势与挑战。 提示：灵活查询、N+1、缓存策略。
7. [频率:低][难度:难] 分享一次你优化数据库性能以支撑实时对话记录的经验。 提示：批量写入、分区表、索引调优。

## 边缘与 Serverless

1. [频率:高][难度:中] 在 Edge Runtime 部署推理代理时，需要注意哪些限制？ 提示：运行时 API、冷启动、二进制依赖。
2. [频率:中][难度:中] Cloudflare Workers 与 Vercel Edge Functions 在 AI 用途上的差异是什么？ 提示：执行时间、存储访问、成本。
3. [频率:中][难度:难] 如何在 Serverless 环境中管理长连接（WebSocket/SSE）？ 提示：状态外部化、Durable Objects、通道服务。
4. [频率:中][难度:难] 当模型需要 GPU 支持时，如何结合 Serverless GPU 或容器服务？ 提示：调度、镜像体积、并发配额。
5. [频率:低][难度:难] 描述你处理 Serverless 冷启动的方案，尤其在高峰期如何预热。 提示：定时触发、最小实例、请求排队。
6. [频率:低][难度:难] 如何在多区域部署中保持配置与模型版本一致？ 提示：配置中心、CI/CD 推送、hash 校验。
7. [频率:低][难度:难] 分享一次你在边缘部署 AI 功能的案例，关键瓶颈是什么？ 提示：网络延迟、依赖限制、调试手段。

## 用户体验与可访问性

1. [频率:高][难度:易] AI 结果逐字呈现时，如何避免用户等待焦虑？ 提示：Skeleton、进度提示、分段展示。
2. [频率:中][难度:易] 当模型回答可能不确定时，如何在 UI 中展示置信度或验证选项？ 提示：标注置信度、提供“需要人工确认”。
3. [频率:中][难度:中] 设计多模态输出（文本、图像、音频）时，如何保持布局协调？ 提示：响应式设计、卡片式布局、懒加载。
4. [频率:中][难度:中] 国际化场景中如何处理本地化提示与日期货币格式？ 提示：i18n 库、LLM locale、翻译记忆。
5. [频率:低][难度:中] 在 AI 表单辅助中，如何设计撤销、还原或人工编辑流程？ 提示：历史记录、版本对比、人工审批。
6. [频率:低][难度:难] 说明如何确保 AI 功能符合可访问性标准（WCAG）。 提示：ARIA 标签、键盘导航、屏幕阅读器。
7. [频率:低][难度:难] 分享你在用户调研中获取 AI 交互反馈的做法。 提示：可用性测试、热力图、访谈。

## 性能与可观测性

1. [频率:高][难度:中] 前端如何监测模型调用延迟并上报？ 提示：Performance API、自定义指标、埋点系统。
2. [频率:中][难度:中] 说明你在前端实现请求去重、缓存与重试的策略。 提示：AbortController、Cache Storage、指数退避。
3. [频率:中][难度:难] 如何结合 Web Vitals 指标评估 AI 页面性能？ 提示：LCP、FID、INP 与流式渲染结合。
4. [频率:中][难度:难] 在后端如何追踪一次请求经过的链路（模型、检索、存储）？ 提示：分布式追踪、trace id、span。
5. [频率:低][难度:难] 解释数据脱敏日志在问题定位中的作用及注意事项。 提示：hash、mask、敏感字段过滤。
6. [频率:低][难度:难] 监控系统中如何区分模型问题与前端渲染问题？ 提示：分层指标、错误标签、关联 ID。
7. [频率:低][难度:难] 描述一次你搭建全链路可观测性（Tracing + Metrics + Logs）的实践。 提示：选择工具、埋点方法、报警策略。

## 实战案例与优化

1. [频率:高][难度:中] 分享一次你上线 AI 助手的经历，从需求到发布的关键节点。 提示：需求澄清、原型验证、上线验收。
2. [频率:中][难度:中] 当用户量激增导致 API 配额受限，你如何快速响应？ 提示：限流、降级、队列缓冲。
3. [频率:中][难度:难] 描述你在灰度发布 AI 功能时的策略与监控指标。 提示：逐步放量、watch list、回滚阈值。
4. [频率:中][难度:难] 如何与产品/运营协作制定 AI 输出的审核流程？ 提示：工作流、人工审核、反馈闭环。
5. [频率:中][难度:难] 说明一次你对 UI/UX 进行改版以提升 AI 功能易用性的案例。 提示：用户反馈、迭代规划、AB 测试。
6. [频率:低][难度:难] 当外部模型价格上涨或限速，你如何调整架构以控制成本？ 提示：模型切换、缓存复用、分级服务。
7. [频率:低][难度:难] 总结你在全栈项目中与安全、合规团队协作的经验。 提示：资料准备、接口检查、审计配合。
8. [频率:低][难度:难] 结合实际项目说明 AI 功能给业务带来哪些量化收益。 提示：转化率、客户满意度、工单减少。
